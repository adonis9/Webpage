<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Horse Draw Manager</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; padding:20px; }
h1 { text-align:center; }
.section { background:white; padding:15px; margin-bottom:20px; border-radius:8px; }
input, select, textarea, button { width:100%; padding:8px; margin:5px 0; }
button { background:#2c3e50; color:white; border:none; cursor:pointer; }
.delete { background:#e74c3c; }
.draw { background:#27ae60; }
.race { border:1px solid #ddd; padding:10px; margin-top:10px; border-radius:5px; }
</style>
</head>
<body>

<!-- LOCK SCREEN -->
<div id="lockScreen" style="text-align:center; margin-top:120px;">
  <h2>üîí Private Page</h2>
  <p>Enter Access Code</p>
  <input type="password" id="accessCode" placeholder="Access code">
  <button onclick="unlock()">Enter</button>
  <p id="error" style="color:red;"></p>
</div>

<!-- APP CONTENT -->
<div id="appContent" style="display:none;">

<h1>üêé Horse Draw Manager</h1>
<button class="delete" onclick="deleteAll()">Delete All Data</button>

<div class="section">
<h2>Add / Edit Horses</h2>
<textarea id="horseNames" placeholder="One horse per line"></textarea>
<select id="houseSelect"></select>
<input id="newHouse" placeholder="Or new house name">
<button onclick="addHorses()">Add Horse(s)</button>
</div>

<div class="section">
<h2>Create Race</h2>
<input id="raceName" placeholder="Race name">
<button onclick="addRace()">Add Race</button>
</div>

<div class="section">
<h2>Races (Assign Horses)</h2>
<div id="races"></div>
</div>

<div class="section">
<h2>üèÅ Draw Results (All Races)</h2>
<button class="draw" onclick="generateAllDraws()">Generate Draw for All Races</button>
<div id="drawResults"></div>
</div>

</div>

<script>
window.onload = function() {
  // DOM Elements
  const lockScreen = document.getElementById("lockScreen");
  const appContent = document.getElementById("appContent");
  const accessCode = document.getElementById("accessCode");
  const error = document.getElementById("error");
  const racesDiv = document.getElementById("races");
  const drawResults = document.getElementById("drawResults");

  // Access code
  const SECRET_CODE = "HORSE2026";
  if (sessionStorage.getItem("accessGranted")) unlock(true);

  function unlock(auto=false){
    if(auto || accessCode.value === SECRET_CODE){
      lockScreen.style.display="none";
      appContent.style.display="block";
      sessionStorage.setItem("accessGranted","true");
    } else { error.textContent="Incorrect access code"; }
  }
  window.unlock = unlock;

  // Preloaded data
  let horses=[], races=[];
  const preload=[
    ["Koxera Monte Barro",["Sabe Na Mundo","Arbisa","Pisadelo","Fradu Fra"]],
    ["Koxera Nene Lapinha",["Forca Imigrante","America Dreams","Bless"]],
    ["Koxera Lele",["Miss Fogo"]],
    ["Clube Juvenil",["Rainha Das Ilhas"]],
    ["Koxera de Neto",["Mestre Moita","Showtime"]],
    ["EECV",["Santiago Sweetie","Djabraba BAYC"]()]()
